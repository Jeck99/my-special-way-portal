<div class="container msw-dialog schedule-dialog">
  <h2 mat-dialog-title>עדכון מערכת שעות</h2>
  <div class="timeslot-subtitle">
    <span class="timeslot-info">יום {{scheduleDialogData.day}}</span>
    <span class="timeslot-info">{{scheduleDialogData.hour}}</span>
  </div>
  <mat-dialog-content data-test-id="edit-cell-dialogue">
    
      <mat-form-field>
        <mat-select placeholder="שיעור"
                    [(ngModel)]="selectedLesson"
                    name="lesson"
                    #lesson="ngModel"
                    (selectionChange)="scheduleDialogData.lesson = selectedLesson"
                    data-test-id="lessons-dropDown"
                    required>
          <mat-option *ngFor="let les of lessons; index as lessonIndex"
                      [attr.data-test-id]="'lesson-' + lessonIndex"
                      [value]="les"
                      selected="selectedLesson && selectedLesson.title === les.title">
            {{les.title}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="lesson.invalid">חובה לבחור שיעור</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-select placeholder="מיקום"
                    [(ngModel)]="selectedLocation"
                    name="location" #location="ngModel"
                    (selectionChange)="scheduleDialogData.location = selectedLocation"
                    data-test-id="locations-dropDown"
                    required>
          <mat-option *ngFor="let loc of locations; index as locationIndex"
                      [attr.data-test-id]="'location-' + locationIndex"
                      [value]="loc"
                      selected="selectedLocation && selectedLocation.name === loc.name">
            {{loc.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="location.invalid">חובה לבחור מיקום</mat-error>
      </mat-form-field>
    
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button class="mat-raised-button" id="close-edit-lesson-dialogue" (click)="dialogRef.close()">סגור</button>
    <button mat-button class="mat-raised-button mat-primary" id="update-edit-lesson-dialogue" (click)="dialogRef.close(scheduleDialogData)"
    [disabled]="lesson.invalid || location.invalid" >עדכן</button>
  </mat-dialog-actions>

</div>
